<!-- Created by David Banwell-Clode on 04/20/2020. -->
<!-- Copyright (c) 2020 David Banwell-Clode. All rights reserved. -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <title>Windy</title>
    <meta name="description" content="Auto Refresh Windy">
    <meta name="author" content="David Banwell-Clode">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:url" content="http://davebc.github.io/" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Windy Auto Refresh" />
    <meta property="og:description" content="A simple auto refresh page for windy.com" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript">
        function refreshAt(minutes) {
            var now = new Date();
            var then = new Date();

            if(now.getMinutes() > minutes) {
                then.setDate(now.getDate() + 1);
            }
            
            then.setMinutes(minutes);

            var timeout = (then.getTime() - now.getTime());
            console.log("timeout: " + timeout);
            setTimeout(function() {document.getElementById('windy').src = document.getElementById('windy').src }, timeout);
        }
    </script>
</head>

<body>
    <iframe id="windy" src="https://www.windy.com/KPDK?radar,33.748,-84.814,9"></iframe>
    <script type="text/javascript">
        refreshAt(57);
    </script>
</body>
</html>
